<mat-toolbar color="primary" class="app-toolbar">

  <button mat-button routerLink="/home" class="brand-logo">
    <mat-icon>account_balance</mat-icon>
    <span>NEXUS FINANCE</span>
  </button>

  <span class="spacer"></span>

  <nav class="desktop-nav">

    <a mat-button routerLink="/home" routerLinkActive="active-link">Home</a>

    @if (isAdmin) {
      <a mat-button routerLink="/clients" routerLinkActive="active-link">Clients</a>
    }

    @if (isClient) {
      <a mat-button routerLink="/loans/apply" routerLinkActive="active-link">Request Loan</a>
    }

    @if (isAdmin) {
      <a mat-button routerLink="/loans/evaluate" routerLinkActive="active-link" class="accent-btn">
        <mat-icon>gavel</mat-icon> Risk Engine
      </a>
    }

    <button mat-icon-button routerLink="/about" aria-label="About">
      <mat-icon>info</mat-icon>
    </button>

    <div class="vertical-divider"></div>

    @if (isSignedIn) {
      <div class="user-profile">
        <span class="welcome-text">Hi, {{ currentUserName }}</span>

        <button mat-icon-button [matMenuTriggerFor]="userMenu" aria-label="User menu">
          <mat-icon>account_circle</mat-icon>
        </button>

        <mat-menu #userMenu="matMenu">
          <div mat-menu-item disabled class="role-badge">
            <small>{{ isAdmin ? 'Administrator' : 'Client' }}</small>
          </div>
          <button mat-menu-item (click)="onSignOut()">
            <mat-icon>logout</mat-icon>
            <span>Sign Out</span>
          </button>
        </mat-menu>
      </div>

    } @else {
      <div class="auth-buttons">
        <button mat-button (click)="onSignIn()">Sign In</button>
        <button mat-stroked-button class="signup-btn" (click)="onSignUp()">Sign Up</button>
      </div>
    }

  </nav>

  <button mat-icon-button class="mobile-menu-btn">
    <mat-icon>menu</mat-icon>
  </button>

</mat-toolbar>
