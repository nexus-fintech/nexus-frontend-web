<div class="flex justify-center">
  <!-- Tarjeta contenedora: Limita el ancho máximo para legibilidad en pantallas grandes -->
  <mat-card class="w-full max-w-4xl shadow-lg">

    <!-- Encabezado de la Tarjeta -->
    <mat-card-header class="bg-gray-50 border-b border-gray-100 p-4 rounded-t mb-4">
      <div mat-card-avatar>
        <mat-icon class="text-primary scale-150 mt-1">person_add</mat-icon>
      </div>
      <mat-card-title class="text-primary">New Client Registration</mat-card-title>
      <mat-card-subtitle>Enter the client's personal and billing information</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="p-6">
      <form [formGroup]="clientForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- SECCIÓN 1: DATOS PERSONALES -->
        <!-- First Name -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>First Name</mat-label>
          <mat-icon matPrefix class="text-gray-400 mr-2">person</mat-icon>
          <input matInput formControlName="firstName" placeholder="Ex. Juan">
          @if (isInvalidControl(clientForm, 'firstName')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'firstName') }}</mat-error>
          }
        </mat-form-field>

        <!-- Last Name -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Last Name</mat-label>
          <input matInput formControlName="lastName" placeholder="Ex. Pérez">
          @if (isInvalidControl(clientForm, 'lastName')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'lastName') }}</mat-error>
          }
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Email Address</mat-label>
          <mat-icon matPrefix class="text-gray-400 mr-2">email</mat-icon>
          <input matInput formControlName="email" placeholder="juan@example.com">
          @if (isInvalidControl(clientForm, 'email')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'email') }}</mat-error>
          }
        </mat-form-field>

        <!-- DNI -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>DNI / Government ID</mat-label>
          <mat-icon matPrefix class="text-gray-400 mr-2">badge</mat-icon>
          <input matInput formControlName="dni" placeholder="12345678">
          <mat-hint align="end">{{clientForm.get('dni')?.value?.length || 0}}/12</mat-hint>
          @if (isInvalidControl(clientForm, 'dni')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'dni') }}</mat-error>
          }
        </mat-form-field>


        <!-- SECCIÓN 2: DIRECCIÓN (Visual Divider) -->
        <div class="col-span-1 md:col-span-2 mt-2">
          <div class="flex items-center gap-2 mb-4">
            <mat-icon class="text-accent">place</mat-icon>
            <h3 class="m-0 text-lg font-medium text-gray-700">Address Information</h3>
          </div>
          <div class="h-px bg-gray-200 w-full mb-4"></div>
        </div>

        <!-- Street -->
        <mat-form-field appearance="outline" class="col-span-1 md:col-span-2">
          <mat-label>Street Address</mat-label>
          <input matInput formControlName="street" placeholder="Av. Principal 123, Dpto 401">
          @if (isInvalidControl(clientForm, 'street')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'street') }}</mat-error>
          }
        </mat-form-field>

        <!-- City -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>City</mat-label>
          <input matInput formControlName="city">
          @if (isInvalidControl(clientForm, 'city')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'city') }}</mat-error>
          }
        </mat-form-field>

        <!-- Zip Code -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Zip Code</mat-label>
          <input matInput formControlName="zipCode">
          @if (isInvalidControl(clientForm, 'zipCode')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'zipCode') }}</mat-error>
          }
        </mat-form-field>

        <!-- Country -->
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Country</mat-label>
          <input matInput formControlName="country">
          @if (isInvalidControl(clientForm, 'country')) {
            <mat-error>{{ errorMessagesForControl(clientForm, 'country') }}</mat-error>
          }
        </mat-form-field>

      </form>
    </mat-card-content>

    <!-- Acciones (Botones) -->
    <mat-card-actions align="end" class="p-4 border-t border-gray-100 bg-gray-50">
      <button mat-button (click)="onCancel()" class="mr-2">
        Cancel
      </button>
      <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="clientForm.invalid">
        <mat-icon>save</mat-icon> Register Client
      </button>
    </mat-card-actions>

  </mat-card>
</div>
